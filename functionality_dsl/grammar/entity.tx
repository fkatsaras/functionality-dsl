import utils
import expression
import integration

AttrType:
  'string' | 'int' | 'float' | 'number' | 'bool' | 'datetime' | 'uuid' | 'dict' | 'list'
;

AttrValue:
  STRING | FLOAT | INT | Bool
;

Attribute:
    ComputedAttribute | SchemaAttribute  
;

SchemaAttribute:
  name=ID ':' type=AttrType (optional?='?')?
  ('default=' default=AttrValue)?
;

ComputedAttribute:
  name=ID ':' type=AttrType (optional?='?')? '=' expr=Expr ';'
;

Input:
  alias=ID ':' target=[Entity]
;

Entity:
  'Entity' name=ID
  ('(' parents+=[Entity] (',' parents+=[Entity])* ')')?
  (
    ('source:' source=[ExternalSource])?
    ('target:' source=[ExternalSource])?
    ('attributes:' '-' attributes+=Attribute ('-' attributes+=Attribute)*)?
    ('where:' where=Expr)?
  )#
  'end'
;
