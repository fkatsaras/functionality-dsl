{
  "scopeName": "source.fdsl",
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#strings"
    },
    {
      "include": "#numbers"
    },
    {
      "include": "#content-types"
    },
    {
      "include": "#block-declarations"
    },
    {
      "include": "#component-kind"
    },
    {
      "include": "#source-kind"
    },
    {
      "include": "#validators"
    },
    {
      "include": "#keywords"
    },
    {
      "include": "#types"
    },
    {
      "include": "#http-verbs"
    },
    {
      "include": "#literals"
    },
    {
      "include": "#operators"
    },
    {
      "include": "#builtin-functions"
    },
    {
      "include": "#identifiers"
    },
    {
      "include": "#angles"
    },
    {
      "include": "#props-keys"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.fdsl",
          "match": "//.*$"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.fdsl",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.fdsl",
              "match": "\\\\."
            },
            {
              "name": "constant.other.placeholder.fdsl",
              "match": "\\{[^}]+\\}"
            }
          ]
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.float.fdsl",
          "match": "\\b\\d+\\.\\d+\\b"
        },
        {
          "name": "constant.numeric.int.fdsl",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "content-types": {
      "patterns": [
        {
          "name": "constant.language.mime-type.fdsl",
          "match": "\\b(application/json|application/xml|application/pdf|application/octet-stream|text/html|text/plain|text/csv|text/xml|image/png|image/jpeg|image/gif|image/svg\\+xml|video/mp4|audio/mpeg|multipart/form-data)\\b"
        }
      ]
    },
    "block-declarations": {
      "patterns": [
        {
          "name": "storage.type.class.fdsl",
          "match": "\\b(Server|Entity|Source|Endpoint|Component)\\b"
        }
      ]
    },
    "component-kind": {
      "patterns": [
        {
          "name": "support.class.componentkind.fdsl",
          "match": "(?<=Component<)(Table|LiveTable|Chart|LiveChart|Gauge|ActionForm|Input|LiveView|Toggle|ObjectView|PageView|Camera)(?=>)"
        }
      ]
    },
    "source-kind": {
      "patterns": [
        {
          "name": "support.type.sourcekind.fdsl",
          "match": "(?<=(Source|Endpoint)<)(REST|WS)(?=>)"
        }
      ]
    },
    "validators": {
      "patterns": [
        {
          "name": "entity.name.function.decorator.fdsl",
          "match": "@(email|url|pattern|minLength|maxLength|length|startsWith|endsWith|trim|min|max|gt|lt|gte|lte|positive|negative|range|minItems|maxItems|unique|each|required|optional|oneOf|in|validate|message)\\b"
        },
        {
          "name": "entity.name.function.decorator.fdsl",
          "match": "@[A-Za-z_][A-Za-z0-9_]*"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.block.fdsl",
          "match": "\\b(end)\\b"
        },
        {
          "name": "keyword.control.import.fdsl",
          "match": "\\b(import)\\b"
        },
        {
          "name": "variable.parameter.property.fdsl",
          "match": "\\b(host|port|cors|loglevel|env|url|method|channel|path|type|entity|request|response|subscribe|publish|auth|summary|parameters|query|headers|token|username|password|key|value|attributes|fields|endpoint|columns|colNames|label|unit|min|max|submitLabel|pathKey|refreshMs|windowSize|height|values|seriesLabels|xLabel|yLabel|placeholder|initial|onLabel|offLabel|errors|events|condition|message|contentType|media)\\b"
        },
        {
          "name": "keyword.control.conditional.fdsl",
          "match": "\\b(if|then|else)\\b"
        },
        {
          "name": "keyword.operator.logical.fdsl",
          "match": "\\b(and|or|not)\\b"
        }
      ]
    },
    "types": {
      "patterns": [
        {
          "name": "storage.type.primitive.fdsl",
          "match": "\\b(string|integer|number|boolean|array|object)\\b"
        },
        {
          "name": "support.type.format.fdsl",
          "match": "\\b(email|uri|uuid_str|date|time|datetime|hostname|ipv4|ipv6|byte|binary|password|regex|float|double|int32|int64)\\b"
        }
      ]
    },
    "http-verbs": {
      "patterns": [
        {
          "name": "constant.language.httpverb.fdsl",
          "match": "\\b(GET|POST|PUT|DELETE|PATCH)\\b"
        }
      ]
    },
    "literals": {
      "patterns": [
        {
          "name": "constant.language.boolean.fdsl",
          "match": "\\b(true|false)\\b"
        },
        {
          "name": "constant.language.null.fdsl",
          "match": "\\bnull\\b"
        },
        {
          "name": "constant.numeric.http-status.fdsl",
          "match": "\\b(200|201|204|400|401|403|404|405|409|422|429|500|502|503|504)\\b"
        }
      ]
    },
    "builtin-functions": {
      "patterns": [
        {
          "name": "support.function.fdsl",
          "match": "\\b(abs|addDays|addHours|addMinutes|addSeconds|all|any|avg|ceil|clamp|concat|contains|daysBetween|endswith|entries|enumerate|error|filter|find|float|floor|formatDate|fromJson|get|getPath|hasKey|int|join|jsonParse|jsonStringify|keys|len|lower|map|max|mean|median|merge|min|now|omit|parseDate|pick|range|replace|round|split|startswith|stddev|str|subtractHours|sum|time|toBool|toInt|toJson|toNumber|toString|today|trim|upper|values|variance)\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.comparison.fdsl",
          "match": "(==|!=|>=|<=|>|<)"
        },
        {
          "name": "keyword.operator.arithmetic.fdsl",
          "match": "(\\+|\\-|\\*\\*|\\*|//|/|%)"
        },
        {
          "name": "keyword.operator.pipeline.fdsl",
          "match": "\\|>"
        },
        {
          "name": "keyword.operator.range.fdsl",
          "match": "\\.\\."
        },
        {
          "name": "storage.type.function.arrow.fdsl",
          "match": "=>"
        },
        {
          "name": "keyword.operator.assignment.fdsl",
          "match": "="
        },
        {
          "name": "punctuation.separator.keyvalue.fdsl",
          "match": ":"
        },
        {
          "name": "punctuation.separator.comma.fdsl",
          "match": ","
        },
        {
          "name": "punctuation.terminator.statement.fdsl",
          "match": ";"
        },
        {
          "name": "punctuation.separator.dash.fdsl",
          "match": "^\\s*-"
        }
      ]
    },
    "angles": {
      "patterns": [
        {
          "name": "punctuation.definition.generic.begin.fdsl",
          "match": "<"
        },
        {
          "name": "punctuation.definition.generic.end.fdsl",
          "match": ">"
        }
      ]
    },
    "props-keys": {
      "patterns": [
        {
          "name": "meta.mapping.key.fdsl",
          "begin": "^(\\s*)(-\\s*)?([A-Za-z_][A-Za-z0-9_]*)\\s*(:)",
          "beginCaptures": {
            "3": {
              "name": "variable.other.property.fdsl"
            },
            "4": {
              "name": "punctuation.separator.keyvalue.fdsl"
            }
          },
          "end": "(?=$)",
          "patterns": []
        }
      ]
    },
    "identifiers": {
      "patterns": [
        {
          "name": "variable.other.property.fdsl",
          "match": "(?<=\\.)([A-Za-z_][A-Za-z0-9_]*)"
        },
        {
          "name": "entity.name.type.class.fdsl",
          "match": "\\b([A-Z][A-Za-z0-9_]*)\\b"
        },
        {
          "name": "variable.other.readwrite.fdsl",
          "match": "\\b([a-z_][A-Za-z0-9_]*)\\b"
        }
      ]
    }
  }
}