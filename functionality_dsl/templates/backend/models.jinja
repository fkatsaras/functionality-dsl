# Auto-generated models.py
from pydantic import BaseModel, ConfigDict, Field, field_validator
from typing import Optional, Any, List, Dict
from datetime import datetime
from uuid import UUID

{% if additional_imports %}
{% for imp in additional_imports %}
{{ imp }}
{% endfor %}
{% endif %}

{% for ent in entities %}
class {{ ent.name }}(BaseModel):
    """Generated Pydantic model for {{ ent.name }}."""

    {% for attr in ent.attributes %}
    {% if attr.field_constraints %}
    {{ attr.name }}: {{ attr.py_type }} = Field({% for key, value in attr.field_constraints.items() %}{{ key }}={{ value }}{% if not loop.last %}, {% endif %}{% endfor %})
    {% else %}
    {# Add default None for Optional fields to make them truly optional in Pydantic v2 #}
    {% if attr.py_type.startswith('Optional[') %}
    {{ attr.name }}: {{ attr.py_type }} = None
    {% else %}
    {{ attr.name }}: {{ attr.py_type }}
    {% endif %}
    {% endif %}
    {% endfor %}

    model_config = ConfigDict(extra="forbid")

{% endfor %}
