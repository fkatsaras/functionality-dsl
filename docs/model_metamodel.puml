@startuml
set namespaceSeparator .



class model.FDSLModel  {
}


class utils.Import  {
  importURI : FQN
}


class entity.Attribute <<abstract>> {
}


class entity.SchemaAttribute  {
  name : ID
  type : AttrType
  optional : optional<BOOL>
  default : AttrValue
}


class entity.ComputedAttribute  {
  name : ID
  type : AttrType
  optional : optional<BOOL>
}


class entity.Input  {
  alias : ID
}


class entity.Entity  {
  name : ID
}


class entity.Source <<abstract>> {
}


class entity.AuthBlock  {
  kind : STRING
  username : STRING
  password : STRING
  token : STRING
  key : STRING
  location : ApiKeyLoc
  value : STRING
}


class entity.ExternalRESTEndpoint  {
  name : ID
  url : STRING
  verb : HttpVerb
}


class entity.ExternalWSEndpoint  {
  name : ID
  url : STRING
  protocol : STRING
  mode : WSmode
}


class entity.InternalRESTEndpoint  {
  name : ID
  verb : HttpVerb
  path : STRING
  summary : STRING
}


class entity.InternalWSEndpoint  {
  name : ID
  mode : WSmode
  path : STRING
  summary : STRING
}


class entity.StringList  {
  items : list[STRING]
}


class entity.Header  {
  key : STRING
  value : STRING
}


class component.AttrRef  {
}


class component.Component <<abstract>> {
}


class component.TableComponent  {
  name : ID
}


class component.LineChartComponent  {
  name : ID
  seriesLabels : list[STRING]
  xLabel : STRING
  yLabel : STRING
}


class component.GaugeComponent  {
  name : ID
  min : FLOAT
  max : FLOAT
  label : STRING
  unit : STRING
}


class component.ActionFormComponent  {
  name : ID
  fields : list[ID]
  pathKey : ID
  submitLabel : STRING
}


class component.InputComponent  {
  name : ID
  label : optional<list[STRING]>
  placeholder : optional<list[STRING]>
  initial : optional<list[STRING]>
  submitLabel : optional<list[STRING]>
}


class component.LiveViewComponent  {
  name : ID
  label : optional<list[STRING]>
}


class server.Server  {
  name : ID
  host : STRING
  port : INT
  base : STRING
  cors : list[STRING]
  env : ID
}


model.FDSLModel *--> "1..*" utils.Import: imports
model.FDSLModel *--> "1..*" server.Server: servers
model.FDSLModel *--> "1..*" entity.InternalRESTEndpoint: internalrest
model.FDSLModel *--> "1..*" entity.InternalWSEndpoint: internalws
model.FDSLModel *--> "1..*" entity.ExternalRESTEndpoint: externalrest
model.FDSLModel *--> "1..*" entity.ExternalWSEndpoint: externalws
model.FDSLModel *--> "1..*" entity.Entity: entities
model.FDSLModel *--> "1..*" component.Component: components
entity.Attribute <|-- entity.ComputedAttribute
entity.Attribute <|-- entity.SchemaAttribute
entity.Input -->  entity.Entity: target
entity.Entity --> "1..*" entity.Entity: parents
entity.Entity -->  entity.Source: source
entity.Entity *--> "1..*" entity.Attribute: attributes
entity.Source <|-- entity.InternalRESTEndpoint
entity.Source <|-- entity.InternalWSEndpoint
entity.Source <|-- entity.ExternalRESTEndpoint
entity.Source <|-- entity.ExternalWSEndpoint
entity.ExternalRESTEndpoint *--> "1..*" entity.Header: headers
entity.ExternalRESTEndpoint *-->  entity.AuthBlock: auth
entity.ExternalRESTEndpoint -->  entity.Entity: entity
entity.ExternalWSEndpoint *-->  entity.StringList: subprotocols
entity.ExternalWSEndpoint *--> "1..*" entity.Header: headers
entity.ExternalWSEndpoint *-->  entity.AuthBlock: auth
entity.ExternalWSEndpoint -->  entity.Entity: entity_in
entity.ExternalWSEndpoint -->  entity.Entity: entity_out
entity.InternalRESTEndpoint -->  entity.Entity: entity
entity.InternalWSEndpoint -->  entity.Entity: entity_in
entity.InternalWSEndpoint -->  entity.Entity: entity_out
component.AttrRef -->  entity.Attribute: attr
component.Component <|-- component.TableComponent
component.Component <|-- component.LineChartComponent
component.Component <|-- component.ActionFormComponent
component.Component <|-- component.GaugeComponent
component.Component <|-- component.InputComponent
component.Component <|-- component.LiveViewComponent
component.TableComponent -->  entity.InternalRESTEndpoint: endpoint
component.TableComponent *-->  entity.StringList: colNames
component.LineChartComponent -->  entity.InternalWSEndpoint: endpoint
component.LineChartComponent *-->  component.AttrRef: rows
component.GaugeComponent -->  entity.InternalWSEndpoint: endpoint
component.GaugeComponent *-->  component.AttrRef: value
component.ActionFormComponent -->  entity.InternalRESTEndpoint: endpoint
component.InputComponent -->  entity.InternalWSEndpoint: endpoint
component.LiveViewComponent -->  entity.InternalWSEndpoint: endpoint
component.LiveViewComponent *-->  entity.StringList: fields

legend
  Match rules:
  |= Name  |= Rule details |
  | Comment | \\/\\/[^\\n]* |
  | AttrType | string\|int\|float\|number\|bool\|datetime\|uuid\|dict\|list |
  | HttpVerb | GET\|POST\|PUT\|DELETE\|PATCH |
  | FQN | ID (. ID)* |
  | WSmode | publish\|subscribe\|duplex |
  | AttrValue | STRING\|FLOAT\|INT |
  | Bool | true\|false |
  | ApiKeyLoc | header\|query |
end legend

@enduml
