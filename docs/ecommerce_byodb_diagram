// FDSL Model
digraph {
	fontname=Arial fontsize=10 rankdir=LR
	nodesep=0.6 ranksep=1.2
	edge [fontsize=9]
	auth_ShopAuth [label="AUTH<session>\nShopAuth" fillcolor="#ffcc80" shape=box style="filled,rounded"]
	role_customer [label="ROLE\ncustomer" fillcolor="#fff9c4" shape=box style="filled,rounded"]
	role_customer -> auth_ShopAuth [label=uses color="#ff9800" style=dashed]
	role_warehouse [label="ROLE\nwarehouse" fillcolor="#fff9c4" shape=box style="filled,rounded"]
	role_warehouse -> auth_ShopAuth [label=uses color="#ff9800" style=dashed]
	server_ECommerceAPI [label="SERVER\nECommerceAPI\nhost: localhost\nport: 8080" fillcolor="#bbdefb" shape=box style="filled,rounded"]
	source_CartAPI [label="SOURCE<REST>\nCartAPI\nhttp://dummy-ecomm-service:9001/cart\nops: read, create, update, delete" fillcolor="#d1c4e9" shape=note style=filled]
	source_InventoryAPI [label="SOURCE<REST>\nInventoryAPI\nhttp://dummy-ecomm-service:9001/stock\nops: read" fillcolor="#d1c4e9" shape=note style=filled]
	source_OrderAPI [label="SOURCE<REST>\nOrderAPI\nhttp://dummy-ecomm-service:9001/current-...\nops: read, create" fillcolor="#d1c4e9" shape=note style=filled]
	entity_Cart [label="Cart\naccess: customer\nitems: array\nupdated_at: string" fillcolor="#c8e6c9" shape=box style="filled,rounded"]
	source_CartAPI -> entity_Cart [label=provides color="#7b1fa2" style=dashed]
	role_customer -> entity_Cart [label="can access" color="#f9a825" style=dotted]
	entity_Inventory [label="Inventory\naccess: warehouse\nin_stock_items: array\nlow_stock_items: array\nout_of_stock_items: array" fillcolor="#c8e6c9" shape=box style="filled,rounded"]
	source_InventoryAPI -> entity_Inventory [label=provides color="#7b1fa2" style=dashed]
	role_warehouse -> entity_Inventory [label="can access" color="#f9a825" style=dotted]
	entity_Order [label="Order\naccess: customer\norder_id: string\nstatus: string\ncreated_at: string\nitems: array" fillcolor="#c8e6c9" shape=box style="filled,rounded"]
	source_OrderAPI -> entity_Order [label=provides color="#7b1fa2" style=dashed]
	role_customer -> entity_Order [label="can access" color="#f9a825" style=dotted]
	entity_CheckoutSummary [label="CheckoutSummary\naccess: customer\nitem_count: integer = dsl_funcs['len'](Cart.get('ite...\nsubtotal: number = dsl_funcs['round'](dsl_funcs['...\ntax: number = dsl_funcs['round'](CheckoutSum...\nshipping: number = 10 if CheckoutSummary.get('sub...\ndiscount: number = 5 if CheckoutSummary.get('subt...\ntotal: number = dsl_funcs['round'](CheckoutSum...\nhas_items: boolean = dsl_funcs['len'](Cart.get('ite..." fillcolor="#c8e6c9" shape=box style="filled,dashed,rounded"]
	entity_Cart -> entity_CheckoutSummary [label=composes color="#1976d2" style=dashed]
	role_customer -> entity_CheckoutSummary [label="can access" color="#f9a825" style=dotted]
	entity_OrderStatus [label="OrderStatus\naccess: customer\norder_id: string = Order.get('order_id')\nstatus: string = Order.get('status')\ncreated_at: string = Order.get('created_at')\nitem_count: integer = dsl_funcs['len'](Order.get('it...\nsubtotal: number = dsl_funcs['round'](dsl_funcs['...\ntotal_amount: number = dsl_funcs['round'](OrderStatus...\nis_pending: boolean = Order.get('status') == 'pendin...\nis_processing: boolean = Order.get('status') == 'proces...\nis_completed: boolean = Order.get('status') == 'comple..." fillcolor="#c8e6c9" shape=box style="filled,dashed,rounded"]
	entity_Order -> entity_OrderStatus [label=composes color="#1976d2" style=dashed]
	role_customer -> entity_OrderStatus [label="can access" color="#f9a825" style=dotted]
	entity_InventoryHealth [label="InventoryHealth\naccess: warehouse\nin_stock_count: integer = dsl_funcs['len'](Inventory.get...\nlow_stock_count: integer = dsl_funcs['len'](Inventory.get...\nout_of_stock_count: integer = dsl_funcs['len'](Inventory.get...\ntotal_items: integer = InventoryHealth.get('in_stock_...\nhealth_score: number = dsl_funcs['round']((InventoryH..." fillcolor="#c8e6c9" shape=box style="filled,dashed,rounded"]
	entity_Inventory -> entity_InventoryHealth [label=composes color="#1976d2" style=dashed]
	role_warehouse -> entity_InventoryHealth [label="can access" color="#f9a825" style=dotted]
	api_Cart [label="REST API\n/api/cart\nops: read, create, update, delete" fillcolor="#ffe0b2" shape=box style=filled]
	entity_Cart -> api_Cart [label=exposes color="#ff6f00"]
	api_Inventory [label="REST API\n/api/inventory\nops: read" fillcolor="#ffe0b2" shape=box style=filled]
	entity_Inventory -> api_Inventory [label=exposes color="#ff6f00"]
	api_Order [label="REST API\n/api/order\nops: read, create" fillcolor="#ffe0b2" shape=box style=filled]
	entity_Order -> api_Order [label=exposes color="#ff6f00"]
	comp_CreateCart [label="COMPONENT\nCreateCart\ntype: ActionForm" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_CreateCart -> entity_Cart [label=binds color="#e91e63"]
	comp_UpdateCart [label="COMPONENT\nUpdateCart\ntype: ActionForm" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_UpdateCart -> entity_Cart [label=binds color="#e91e63"]
	comp_TotalCartValue [label="COMPONENT\nTotalCartValue\ntype: Metric" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_TotalCartValue -> entity_CheckoutSummary [label=binds color="#e91e63"]
	comp_ItemsInCart [label="COMPONENT\nItemsInCart\ntype: Metric" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_ItemsInCart -> entity_CheckoutSummary [label=binds color="#e91e63"]
	comp_InventoryHealthScore [label="COMPONENT\nInventoryHealthScore\ntype: Metric" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_InventoryHealthScore -> entity_InventoryHealth [label=binds color="#e91e63"]
	comp_CheckoutDetails [label="COMPONENT\nCheckoutDetails\ntype: DataCard" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_CheckoutDetails -> entity_CheckoutSummary [label=binds color="#e91e63"]
	comp_OrderDetails [label="COMPONENT\nOrderDetails\ntype: DataCard" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_OrderDetails -> entity_OrderStatus [label=binds color="#e91e63"]
	comp_StockOverview [label="COMPONENT\nStockOverview\ntype: DataCard" fillcolor="#f8bbd0" shape=ellipse style=filled]
	comp_StockOverview -> entity_InventoryHealth [label=binds color="#e91e63"]
}
