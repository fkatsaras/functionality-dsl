// FDSL Model
digraph {
	fontname=Arial fontsize=10 rankdir=LR
	nodesep=0.6 ranksep=1.2
	edge [fontsize=9]
	auth_UserAuth [label="AUTH<jwt>\nUserAuth" fillcolor="#ffcc80" shape=box style="filled,rounded"]
	auth_FinnhubAuth [label="AUTH<apikey>\nFinnhubAuth" fillcolor="#ffcc80" shape=box style="filled,rounded"]
	auth_FinnhubWSAuth [label="AUTH<apikey>\nFinnhubWSAuth" fillcolor="#ffcc80" shape=box style="filled,rounded"]
	role_trader [label="ROLE\ntrader" fillcolor="#fff9c4" shape=box style="filled,rounded"]
	role_trader -> auth_UserAuth [label=uses color="#ff9800" style=dashed]
	server_FinnhubStockAPI [label="SERVER\nFinnhubStockAPI\nhost: localhost\nport: 8000" fillcolor="#bbdefb" shape=box style="filled,rounded"]
	source_QuoteAPI [label="SOURCE<REST>\nQuoteAPI\nhttps://finnhub.io/api/v1/quote\nops: read" fillcolor="#d1c4e9" shape=note style=filled]
	source_QuoteAPI -> auth_FinnhubAuth [label=auth color="#ff9800" style=dotted]
	source_ProfileAPI [label="SOURCE<REST>\nProfileAPI\nhttps://finnhub.io/api/v1/stock/profile2\nops: read" fillcolor="#d1c4e9" shape=note style=filled]
	source_ProfileAPI -> auth_FinnhubAuth [label=auth color="#ff9800" style=dotted]
	source_FinnhubTradesWS [label="SOURCE<WS>\nFinnhubTradesWS\nwss://ws.finnhub.io\nops: subscribe" fillcolor="#b39ddb" shape=note style=filled]
	source_FinnhubTradesWS -> auth_FinnhubWSAuth [label=auth color="#ff9800" style=dotted]
	entity_RawQuote [label="RawQuote\naccess: trader\nc: number\nd: number\ndp: number\nh: number\nl: number\no: number\npc: number\nt: integer" fillcolor="#c8e6c9" shape=box style="filled,rounded"]
	source_QuoteAPI -> entity_RawQuote [label=provides color="#7b1fa2" style=dashed]
	role_trader -> entity_RawQuote [label="can access" color="#f9a825" style=dotted]
	entity_RawProfile [label="RawProfile\naccess: trader\nticker: string\nname: string\ncountry: string\ncurrency: string\nexchange: string\nipo: string\nmarketCapitalization: number\nshareOutstanding: number\nlogo: string\nphone: string\nweburl: string\nfinnhubIndustry: string" fillcolor="#c8e6c9" shape=box style="filled,rounded"]
	source_ProfileAPI -> entity_RawProfile [label=provides color="#7b1fa2" style=dashed]
	role_trader -> entity_RawProfile [label="can access" color="#f9a825" style=dotted]
	entity_StockDashboard [label="StockDashboard\naccess: trader\nticker: string = RawProfile.get('ticker')\ncompanyName: string = RawProfile.get('name')\nindustry: string = RawProfile.get('finnhubIndustr...\nexchange: string = RawProfile.get('exchange')\nlogoUrl: string = RawProfile.get('logo')\ncurrentPrice: number = RawQuote.get('c')\npriceChange: number = RawQuote.get('d')\npercentChange: number = dsl_funcs['round'](RawQuote.ge...\npriceFormatted: string = '$' + dsl_funcs['toString'](ds...\nchangeFormatted: string = dsl_funcs['toString'](dsl_func...\ndayHigh: number = RawQuote.get('h')\ndayLow: number = RawQuote.get('l')\ndayRange: string = '$' + dsl_funcs['toString'](ds...\nopenPrice: number = RawQuote.get('o')\npreviousClose: number = RawQuote.get('pc')\nmarketCap: number = RawProfile.get('marketCapitali...\nmarketCapFormatted: string = '$' + dsl_funcs['toString'](ds...\npriceVsOpen: number = dsl_funcs['round'](RawQuote.ge...\ndayVolatility: number = dsl_funcs['round']((RawQuote.g...\nisPositive: boolean = RawQuote.get('d') \>= 0\ntrend: string = 'up' if RawQuote.get('d') \> 0..." fillcolor="#c8e6c9" shape=box style="filled,dashed,rounded"]
	entity_RawQuote -> entity_StockDashboard [label=composes color="#1976d2" style=dashed]
	entity_RawProfile -> entity_StockDashboard [label=composes color="#1976d2" style=dashed]
	role_trader -> entity_StockDashboard [label="can access" color="#f9a825" style=dotted]
	entity_RawTrade [label="[inbound]\nRawTrade\naccess: public\ns: string\np: number\nv: number\nt: integer<int64>" fillcolor="#fff3e0" shape=box style="filled,rounded"]
	source_FinnhubTradesWS -> entity_RawTrade [label=provides color="#7b1fa2" style=dashed]
	entity_LiveTrade [label="[inbound]\nLiveTrade\naccess: public\nsymbol: string = RawTrade.get('s')\nprice: number = RawTrade.get('p')\nvolume: number = RawTrade.get('v')\ntimestamp: integer<int64> = RawTrade.get('t')\npriceFormatted: string = '$' + dsl_funcs['toString'](ds...\nvolumeFormatted: string = dsl_funcs['toString'](dsl_func..." fillcolor="#fff3e0" shape=box style="filled,rounded"]
	entity_RawTrade -> entity_LiveTrade [label=composes color="#1976d2" style=dashed]
	api_RawQuote [label="REST API\n/api/rawquote\nops: read" fillcolor="#ffe0b2" shape=box style=filled]
	entity_RawQuote -> api_RawQuote [label=exposes color="#ff6f00"]
	api_RawProfile [label="REST API\n/api/rawprofile\nops: read" fillcolor="#ffe0b2" shape=box style=filled]
	entity_RawProfile -> api_RawProfile [label=exposes color="#ff6f00"]
}
